<div class="productos-admin-bg"></div>
<div class="productos-container">
  <!-- Crear Producto -->
  <h2 class="productos-admin-title">Crear Producto</h2>
  <form (ngSubmit)="crearProducto()" class="productos-form">
    <div class="form-group">
      <label for="nombreProducto">Nombre:</label>
      <input type="text" id="nombreProducto" [(ngModel)]="nuevonombre" name="nombreProducto" required>
    </div>
    <div class="form-group">
      <label for="descripcionProducto">Descripción:</label>
      <input type="text" id="descripcionProducto" [(ngModel)]="nuevodescripcion" name="descripcionProducto">
    </div>
    <div class="form-group">
      <label for="precioProducto">Precio:</label>
      <input type="number" id="precioProducto" [(ngModel)]="nuevoprecio" name="precioProducto" required>
    </div>
    <div class="form-group">
      <label for="categoriaProducto">Categoría:</label>
      <select id="categoriaProducto" [(ngModel)]="categoriaID" name="categoriaProducto" required>
        <option value="" disabled selected>Seleccione categoría</option>
        <option *ngFor="let categoria of categorias" [value]="categoria.id_categoria">
          {{categoria.nombre}}
        </option>
      </select>
    </div>
    <div class="form-group">
      <label for="stockProducto">Stock:</label>
      <input type="number" id="stockProducto" [(ngModel)]="nuevostock" name="stockProducto" required>
    </div>
    <button type="submit" class="btn-submit">Crear</button>
    <div *ngIf="mensajeAlta" class="mensaje">
      {{mensajeAlta}}
    </div>
  </form>

  <hr>

  <!-- Mostrar Productos -->
  <h2 class="productos-admin-title">Lista de Productos</h2>
  <button class="btn-submit" (click)="mostrarProductos()">Mostrar Productos</button>
  <ul *ngIf="productos && productos.length > 0">
    <li *ngFor="let producto of productos">
      <strong>{{producto.nombre}}</strong> - {{producto.precio}}€ | {{producto.descripcion}}
      <button class="btn-editar" (click)="seleccionarProducto(producto)">Modificar</button>
      <button class="btn-eliminar" (click)="eliminarProducto(producto.id_producto)">Eliminar</button>
    </li>
  </ul>
  <div *ngIf="productos && productos.length === 0">
    <em>No hay productos registrados.</em>
  </div>

  <hr>

  <!-- Modificar Producto -->
  <div *ngIf="productoSeleccionado">
    <h2 class="productos-admin-title">Modificar Producto</h2>
    <form (ngSubmit)="modificarProducto()" class="productos-form">
      <div class="form-group">
        <label for="modNombre">Nombre:</label>
        <input type="text" id="modNombre" [(ngModel)]="nombre" name="modNombre" required>
      </div>
      <div class="form-group">
        <label for="modPrecio">Precio:</label>
        <input type="number" id="modPrecio" [(ngModel)]="precio" name="modPrecio" required>
      </div>
      <div class="form-group">
        <label for="modDescripcion">Descripción:</label>
        <input type="text" id="modDescripcion" [(ngModel)]="descripcion" name="modDescripcion">
      </div>
      <div class="form-group">
        <label for="categoriaProducto">Categoría:</label>
        <select id="categoriaProducto" [(ngModel)]="categoriaID" name="categoriaProducto" required>
          <option value="" disabled selected>Seleccione categoría</option>
          <option *ngFor="let categoria of categorias" [value]="categoria.id_categoria">
            {{categoria.nombre}}
          </option>
        </select>
      </div>
      <div class="form-group">
        <label for="stockProducto">Stock:</label>
        <input type="number" id="stockProducto" [(ngModel)]="nuevostock" name="stockProducto" required>
      </div>
      <button type="submit" class="btn-submit">Guardar Cambios</button>
      <div *ngIf="mensajeUpdate" class="mensaje" style="color: #eab308;">{{mensajeUpdate}}</div>
    </form>
  </div>

  <hr>

  <!-- Eliminar Producto -->
  <h2 class="productos-admin-title">Eliminar Producto</h2>
  <form (ngSubmit)="eliminarProducto(idEliminar)" class="productos-form">
    <div class="form-group">
      <label for="eliminarId">ID del producto a eliminar:</label>
      <input type="number" id="eliminarId" [(ngModel)]="idEliminar" name="eliminarId" required>
    </div>
    <button type="submit" class="btn-eliminar">Eliminar</button>
    <div *ngIf="mensajeEliminar" class="mensaje" style="color: #e13c65;">{{mensajeEliminar}}</div>
  </form>
</div>
